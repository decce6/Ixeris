plugins {
    id 'idea'
    id 'java-library'
    id 'net.neoforged.moddev.legacyforge' version '2.0.91'
}

version = mod_version
group = mod_group_id

base {
    archivesName = "ixeris-service-forge"
}

repositories {
    mavenLocal()
}

// Mojang ships Java 17 to end users in 1.20.1, so mods should target Java 17.
java.toolchain.languageVersion = JavaLanguageVersion.of(17)

legacyForge {
    // Specify the version of MinecraftForge to use.
    version = project.minecraft_version + '-' + project.forge_version
}

// Include resources generated by data generators.
sourceSets.main.resources { srcDir 'src/generated/resources' }

// Sets up a dependency configuration called 'localRuntime' and a deobfuscating one called 'modLocalRuntime'
// These configurations should be used instead of 'runtimeOnly' to declare
// a dependency that will be present for runtime testing but that is
// "optional", meaning it will not be pulled by dependents of this mod.
configurations {
    runtimeClasspath.extendsFrom localRuntime
}
obfuscation {
    createRemappingConfiguration(configurations.localRuntime)
}

repositories {
    maven {
        name "lenni0451"
        url "https://maven.lenni0451.net/snapshots"
    }
}

dependencies {
    compileOnly "me.decce.ixeris:core"
    compileOnly "net.lenni0451.classtransform:core:1.14.2-SNAPSHOT"
    compileOnly "net.lenni0451.classtransform:mixinstranslator:1.14.2-SNAPSHOT"
    compileOnly "net.lenni0451:Reflect:1.5.0"
}

jar {
//    manifest.attributes([
//            "MixinConfigs": "${mod_id}.mixins.json"
//    ])
}


tasks.withType(JavaCompile).configureEach {
    options.encoding = 'UTF-8' // Use the UTF-8 charset for Java compilation
}
